name: 'GitVersion Action'
description: 'This GitHub Action extracts version information using GitVersion.'

# inputs:
#   github-token:
#     description: 'GitHub Token for authentication'
#     required: true

# outputs:
#   gitversion-fullsemver:
#     description: 'FullSemVer from GitVersion'
#     value: ${{ steps.gitversion.outputs.fullSemVer }}
#   gitversion-sha:
#     description: 'Current commit SHA'
#     value: ${{ steps.gitversion.outputs.sha }}

runs:
  using: 'composite'
  steps:
    - uses: actions/checkout@v4
      with:
        fetch-depth: 0

    - name: Setup GitVersion
      uses: gittools/actions/gitversion/setup@v4
      with:
        versionSpec: '6.4.x'

    - name: Execute GitVersion
      id: gitversion
      uses: gittools/actions/gitversion/execute@v4

    - name: Set outputs
      run: |
        echo "gitversion-fullsemver=${{ steps.gitversion.outputs.fullSemVer }}" >> $GITHUB_OUTPUT
        echo "gitversion-sha=${{ steps.gitversion.outputs.sha }}" >> $GITHUB_OUTPUT
